<?xml version='1.0' encoding='utf-8'?>
<function id="getFreeMemory" xmlns="http://bsi.bund.de/TR03151" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://bsi.bund.de/TR03151 ../../schema/functions.xsd">
  <name>getFreeMemory</name>
  <category>Speicherverwaltung</category>
  <description>The function getFreeMemory can be used to get the amount of the currently free memory.</description>
  <detailedSteps>
    <step>
      <number>1</number>
      <originalText>If the referencing guideline limits the access to the functionality solely to authenticated users, the function SHALL check if the user that has invoked the function has the status authenticated. If the status is not authenticated, the function SHALL raise the exception ErrorUserNotAuthenticated and exit the function.</originalText>
      <germanText>Prüft, ob Nutzer authentifiziert. Falls nicht: Exception ErrorUserNotAuthenticated, Ende.</germanText>
      <pseudocode>WENN Benutzer NICHT authentifiziert DANN
  WERFE ErrorUserNotAuthenticated
  BEENDE_FUNKTION
ENDE</pseudocode>
      <errorCase>
        <exception>ErrorUserNotAuthenticated</exception>
        <trigger>Der Benutzer ist nicht authentifiziert</trigger>
        <action>Funktion beenden</action>
      </errorCase>
    </step>
    <step>
      <number>2</number>
      <originalText>If the referencing guideline limits the access to the functionality to certain roles, the function SHALL check in the corresponding role if the (unauthenticated) user is authorized to execute the function. If the user is not authorized, the function SHALL raise the exception ErrorUserNotAuthorized and exit the function.</originalText>
      <germanText>Prüft, ob Nutzer berechtigt. Falls nicht: Exception ErrorUserNotAuthorized, Ende.</germanText>
      <pseudocode>WENN Benutzer NICHT autorisiert DANN
  WERFE ErrorUserNotAuthorized
  BEENDE_FUNKTION
ENDE</pseudocode>
      <errorCase>
        <exception>ErrorUserNotAuthorized</exception>
        <trigger>Der Benutzer ist nicht berechtigt</trigger>
        <action>Funktion beenden</action>
      </errorCase>
    </step>
    <step>
      <number>3</number>
      <originalText>The function SHALL determine the amount of the currently free memory. If the determination of the amount of the currently free memory fails, the function SHALL raise the exception ErrorGetFreeMemoryFailed and exit the function.</originalText>
      <germanText>Ermittelt freien Speicher. Bei Fehler: Exception ErrorGetFreeMemoryFailed, Ende.</germanText>
      <pseudocode>VERSUCHE
  ERMITTLE Menge des aktuell freien Speichers
BEI_FEHLER
  WERFE ErrorGetFreeMemoryFailed
  BEENDE_FUNKTION
ENDE</pseudocode>
      <errorCase>
        <exception>ErrorGetFreeMemoryFailed</exception>
        <trigger>Die Ermittlung des freien Speichers schlägt fehl</trigger>
        <action>Funktion beenden</action>
      </errorCase>
    </step>
    <step>
      <number>4</number>
      <originalText>If the determination of the amount of the currently free memory has been successful, the function SHALL return the amount of the currently free memory by usage of the output parameter freeMemory. Additionally, the function SHALL return without raising an exception to indicate that the execution of the function getFreeMemory has been successful.</originalText>
      <germanText>Gibt freien Speicher zurück. Bei Erfolg keine Exception.</germanText>
      <pseudocode>GEBE Menge freien Speichers zurück (freeMemory Parameter)
RETURN ohne Exception</pseudocode>
      <successCase>
        <condition>Die Ermittlung der Menge des aktuell freien Speichers war erfolgreich</condition>
        <action>Gibt Speichermenge zurück und kehrt ohne Exception zurück</action>
      </successCase>
    </step>
  </detailedSteps>
  <parameters />
  <returnValue>
    <type>long</type>
    <description>the free memory of the storage medium in bytes.</description>
  </returnValue>
  <exceptions>
    <exception>ErrorDeviceNotInitialized</exception>
    <exception>ErrorFunctionFailed</exception>
    <exception>ErrorFunctionNotSupported</exception>
    <exception>ErrorGetFreeMemoryFailed</exception>
    <exception>ErrorParameterSyntax</exception>
    <exception>ErrorStorageMediumDisconnected</exception>
    <exception>ErrorUserNotAuthenticated</exception>
    <exception>ErrorUserNotAuthorized</exception>
  </exceptions>
</function>
