<?xml version='1.0' encoding='utf-8'?>
<function xmlns="http://bsi.bund.de/TR03151" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="getMaxNumberOfClients" xsi:schemaLocation="http://bsi.bund.de/TR03151 ../../schema/functions.xsd">
  <name>getMaxNumberOfClients</name>
  <category>Client- und Transaktionsverwaltung</category>
  <description>The function getMaxNumberOfClients can be used to get the maximum number of clients that can use the functionality for logging transactions of the device simultaneously.</description>
  <detailedSteps>
    <step>
      <number>1</number>
      <originalText>If the referencing guideline limits the access to the functionality solely to authenticated users, the function SHALL check if the user that has invoked the function has the status authenticated. If the status is not authenticated, the function SHALL raise the exception ErrorUserNotAuthenticated and exit the function.</originalText>
      <germanText>Prüft, ob Nutzer authentifiziert. Falls nicht: Exception ErrorUserNotAuthenticated, Ende.</germanText>
      <pseudocode>WENN Benutzer NICHT authentifiziert DANN
  WERFE ErrorUserNotAuthenticated
  BEENDE_FUNKTION
ENDE</pseudocode>
      <errorCase>
        <exception>ErrorUserNotAuthenticated</exception>
        <trigger>Der Benutzer ist nicht authentifiziert</trigger>
        <action>Funktion beenden</action>
      </errorCase>
    </step>
    <step>
      <number>2</number>
      <originalText>If the referencing guideline limits the access to the functionality to certain roles, the function SHALL check in the corresponding role if the (unauthenticated) user is authorized to execute the function. If the user is not authorized, the function SHALL raise the exception ErrorUserNotAuthorized and exit the function.</originalText>
      <germanText>Prüft, ob Nutzer berechtigt. Falls nicht: Exception ErrorUserNotAuthorized, Ende.</germanText>
      <pseudocode>WENN Benutzer NICHT autorisiert DANN
  WERFE ErrorUserNotAuthorized
  BEENDE_FUNKTION
ENDE</pseudocode>
      <errorCase>
        <exception>ErrorUserNotAuthorized</exception>
        <trigger>Der Benutzer ist nicht berechtigt</trigger>
        <action>Funktion beenden</action>
      </errorCase>
    </step>
    <step>
      <number>3</number>
      <originalText>The function SHALL determine the maximum number of clients that could use the device simultaneously.</originalText>
      <germanText>Ermittelt maximale Clientanzahl, die gleichzeitig das Gerät nutzen kann.</germanText>
      <pseudocode>VERSUCHE
  ERMITTLE maximale Clientanzahl
BEI_FEHLER
  WERFE ErrorGetMaxNumberOfClientsFailed
  BEENDE_FUNKTION
ENDE</pseudocode>
      <errorCase>
        <exception>ErrorGetMaxNumberOfClientsFailed</exception>
        <trigger>Die Ermittlung der maximalen Clientanzahl schlägt fehl</trigger>
        <action>Funktion beenden</action>
      </errorCase>
    </step>
    <step>
      <number>4</number>
      <originalText>If the determination of the number of clients has been successful, the function SHALL return the number by usage of the output parameter maxNumberClients. If the device supports a practically unlimited number of clients, the function SHALL return the highest value that can be stored in the</originalText>
      <germanText>Gibt maximale Clientanzahl zurück. Bei unbegrenzten Clients: Gibt Höchstwert zurück. Bei Erfolg keine Exception.</germanText>
      <pseudocode>GEBE maximale Clientanzahl zurück (maxNumberClients Parameter)
RETURN ohne Exception</pseudocode>
      <successCase>
        <condition>Die Ermittlung der maximalen Clientanzahl war erfolgreich</condition>
        <action>Gibt maximale Clientanzahl zurück und kehrt ohne Exception zurück</action>
      </successCase>
    </step>
  </detailedSteps>
  <parameters />
  <returnValue>
    <type>long</type>
    <description>the maximum number of different clients that can use the device simultaneously.</description>
  </returnValue>
  <exceptions>
    <exception>ErrorDeviceNotInitialized</exception>
    <exception>ErrorFunctionFailed</exception>
    <exception>ErrorFunctionNotSupported</exception>
    <exception>ErrorGetMaxNumberOfClientsFailed</exception>
    <exception>ErrorParameterSyntax</exception>
    <exception>ErrorSecureElementDisabled</exception>
    <exception>ErrorUserNotAuthenticated</exception>
    <exception>ErrorUserNotAuthorized</exception>
  </exceptions>
</function>
