flowchart TD
    Start([Nutzer: getEndOfUsageDate<br/>aufrufen])
    Start --> CheckInit{TSE<br/>initialisiert?}
    
    CheckInit -->|Nein| ErrorInit[Exception:<br/>ErrorDeviceNotInitialized]
    CheckInit -->|Ja| DetermineDate[Bestimme fr체hestes Datum<br/>nach dem Input-Funktionen<br/>nicht mehr nutzbar sind]
    
    DetermineDate --> CheckCert[Pr체fe:<br/>- Zertifikats-Ablaufdatum<br/>- Geplante Obsoleszenz<br/>- Hardware-Limits]
    
    CheckCert --> IgnoreLocks[Ignoriere dabei:<br/>- disableSecureElement<br/>- lockTransactionLogging]
    
    IgnoreLocks --> CheckDetermine{Bestimmung<br/>erfolgreich?}
    
    CheckDetermine -->|Nein| ErrorGet[Exception:<br/>ErrorGetEndOfUsageDateFailed]
    CheckDetermine -->|Ja| Return[R체ckgabe:<br/>endOfUsageDate DateTime]
    
    Return --> CheckDate{Datum bald<br/>erreicht?}
    
    CheckDate -->|<90 Tage| WarnExpire[Warnung:<br/>TSE l채uft bald ab!<br/>Ersatz planen]
    CheckDate -->|>90 Tage| End([Ende])
    
    WarnExpire --> End
    ErrorInit --> End
    ErrorGet --> End
    
    style DetermineDate fill:#87CEEB
    style Return fill:#90EE90
    style WarnExpire fill:#FFD700
